<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta name="Generator" content="MKDOC " />
 <title>QtLua library manual </title>
 <link rel="stylesheet" href="mkdoc.css" />
 <style type="text/css">

  .sec_hidden { display: none; }
  .sec_shown {}
 </style>
</head><body>
<div class="page"><div class="head"><img class="headlogo" src="logo-small.png" alt="logo" /><div class="headlinks"><a href="Table_of_contents.html">Table of contents</a>
 &nbsp; <a href="API_documentation.html">API documentation</a>
</div><div class="navlinks"><a href="index.html" accesskey="t">Top</a> &nbsp; <a href="ArrayProxyRo_ArrayProxy_T_ProxyIterator_internal_class_members.html"  accesskey="p" id="nav_prev">Previous </a> &nbsp; <a href="API_documentation.html"  accesskey="u" id="nav_up"> Up </a> &nbsp; <a href="DispatchProxy_class_reference.html"  accesskey="n" id="nav_next"> Next</a></div>
</div><div class="content"><div style="clear: both; height:20px;"></div>
<h1>Console class reference<br /><span class="subtitle">
[Base module]</span>
</h1><div class="sec_content1">
<div style="clear: both; height:20px;"></div>
<div class="tree_frame" style="width:130px;"><div class="tree_row"><div style="width:10px;" class="tree_pad"></div><div style="width:110px;" class="tree_public"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qtextedit.html">QTextEdit</a></span></div
></div><br/><div style="width:65px;" class="tree_connect_1">&nbsp;</div
><div style="width:65px;" class="tree_connect_4">&nbsp;</div><br/><div style="width:65px;" class="tree_connect_1">&nbsp;</div
><div style="width:65px;" class="tree_connect_4">&nbsp;</div><br/><div class="tree_row"><div style="width:15px;" class="tree_pad"></div><div style="width:100px;" class="tree_this"><a href="Console_class_reference.html">Console</a></div
></div><br/></div>
</div><h2>Declaration<a href="#_Declaration2" id="_Declaration2" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
<div class="codebox"><code><span class="codedir">#include</span> &lt;QtLua/Console&gt;<br /><br /><span class="codekw">namespace</span> QtLua {<br />  <span class="codekw">class</span> Console;<br />};<br /></code></div><p> This class is a member of the <a href="QtLua_namespace_reference.html">QtLua</a> namespace.</p>
</div><h2>Description<a href="#_Description3" id="_Description3" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
<p>This class provides a easy to use console widget for use in QtLua based applications.</p>
<p>This widget is a general purpose console widget with history and completion capabilities.</p>
<p><a href="The_qtlua_interpreter_tool.html">The qtlua interpreter tool</a> uses this widget.</p>
<p>When used with a <a href="State_class_reference.html">State</a> lua interpreter object, it only needs a few signals connections to get a working lua based shell:</p>
<div class="codebox"><code><span class="codecmt">// code from <a href="http://svn.savannah.gnu.org/viewvc/trunk/libqtlua/examples/cpp/console/console.cc?root=libqtlua&revision=0&view=annotate#l25">examples/cpp/console/console.cc:25</a></span><br /><br />MainWindow::MainWindow()<br />  : <a class="coderef" href="http://doc.trolltech.com/4.5/qmainwindow.html">QMainWindow</a>()<br />{<br />  state = <span class="codekw">new</span> <a class="coderef" href="State_class_reference.html">QtLua::State</a>();<br />  console = <span class="codekw">new</span> <a class="coderef" href="Console_class_reference.html">QtLua::Console</a>();<br /><br />  setCentralWidget(console);<br /><br />  connect(console, SIGNAL(<a class="coderef" href="Console_class_reference.html#__44">line_validate</a>(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a>&amp;)),<br />          state, SLOT(exec(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a>&amp;)));<br /><br />  connect(console, SIGNAL(<a class="coderef" href="Console_class_reference.html#__38">get_completion_list</a>(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a> &amp;, <a class="coderef" href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a> &amp;, <span class="codetype">int</span> &amp;)),<br />          state, SLOT(fill_completion_list(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a> &amp;, <a class="coderef" href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a> &amp;, <span class="codetype">int</span> &amp;)));<br /><br />  connect(state, SIGNAL(output(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a>&amp;)),<br />          console, SLOT(<a class="coderef" href="Console_class_reference.html#__46">print</a>(<span class="codekw">const</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qstring.html">QString</a>&amp;)));<br />}<br /></code></div></div><h2>Members<a href="#_Members2" id="_Members2" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
</div><h3>Functions<a href="#_Functions2" id="_Functions2" class="hover_link">&nbsp;&nbsp;</a></h3><div class="sec_content3">
<ul><li><span class="listitem"><span class="member_prefix"></span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__37">Console</a></span>(<span class="member_params"><span class="member_param">QWidget *parent = <em>[...]</em>, </span><span class="member_param">const QString &amp;prompt = <em>[...]</em>, </span><span class="member_param">const QStringList &amp;history = <em>[...]</em></span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">const QStringList &amp; </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__39">get_history</a></span>(<span class="member_params">) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">int </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__40">get_history_size</a></span>(<span class="member_params">) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">const QString &amp; </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__41">get_prompt</a></span>(<span class="member_params">) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">int </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__42">get_text_height</a></span>(<span class="member_params">) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">int </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__43">get_text_width</a></span>(<span class="member_params">) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__45">load_history</a></span>(<span class="member_params"><span class="member_param">QSettings &amp;s, </span><span class="member_param">const QString &amp;key = <em>[...]</em></span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__47">save_history</a></span>(<span class="member_params"><span class="member_param">QSettings &amp;s, </span><span class="member_param">const QString &amp;key = <em>[...]</em></span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__48">set_completion_regexp</a></span>(<span class="member_params"><span class="member_param">const QRegExp &amp;regexp</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__49">set_history</a></span>(<span class="member_params"><span class="member_param">const QStringList &amp;h</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__50">set_history_size</a></span>(<span class="member_params"><span class="member_param">int history_size</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__51">set_prompt</a></span>(<span class="member_params"><span class="member_param">const QString &amp;p</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__52">set_text_height</a></span>(<span class="member_params"><span class="member_param">int height</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__53">set_text_width</a></span>(<span class="member_params"><span class="member_param">int width</span>)</span></span></span></li>
</ul>
</div><h3>Slot<a href="#_Slot" id="_Slot" class="hover_link">&nbsp;&nbsp;</a></h3><div class="sec_content3">
<ul><li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__46">print</a></span>(<span class="member_params"><span class="member_param">const QString &amp;str</span>)</span></span></span></li>
</ul>
</div><h3>Signals<a href="#_Signals" id="_Signals" class="hover_link">&nbsp;&nbsp;</a></h3><div class="sec_content3">
<ul><li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__38">get_completion_list</a></span>(<span class="member_params"><span class="member_param">const QString &amp;prefix, </span><span class="member_param">QStringList &amp;list, </span><span class="member_param">int &amp;cursor_offset</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="Console_class_reference.html#__44">line_validate</a></span>(<span class="member_params"><span class="member_param">const QString &amp;str</span>)</span></span></span></li>
</ul>
</div><h2>Members detail<a href="#_Members_detail2" id="_Members_detail2" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
</div><div class="divmember public_member"><h3><span class="member_prefix"></span><span class="member_signature"><span class="member_name">Console</span>(<span class="member_params"><span class="member_param"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qwidget.html">QWidget</a></span> *parent = 0, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;prompt = QString(&quot;$&quot;), </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a></span> &amp;history = QStringList()</span>)</span></span><a href="#__37" id="__37" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Create a console widget and restore history</p>
</div><div class="divmember signal_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">get_completion_list</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;prefix, </span><span class="member_param"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a></span> &amp;list, </span><span class="member_param">int &amp;cursor_offset</span>)</span></span><a href="#__38" id="__38" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>This member is a Qt signal.</p>
<p>Signal emited to query completion list.</p>
<p>Parameters list:</p>
<ul><li>prefix: text extracted before cursor. </li>
<li>list: must be filled with completion matches by completion slot function. </li>
<li>cursor_offset: may be decreased by completion slot function to move cursor backward on completed text. (only used on single match)</li>
</ul>
</div><div class="divmember public_member"><h3><span class="member_prefix">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a></span> &amp; </span><span class="member_signature"><span class="member_name">get_history</span>(<span class="member_params">) const</span></span><a href="#__39" id="__39" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get current history.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">int </span><span class="member_signature"><span class="member_name">get_history_size</span>(<span class="member_params">) const</span></span><a href="#__40" id="__40" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get console max history entries count</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp; </span><span class="member_signature"><span class="member_name">get_prompt</span>(<span class="member_params">) const</span></span><a href="#__41" id="__41" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get console prompt.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">int </span><span class="member_signature"><span class="member_name">get_text_height</span>(<span class="member_params">) const</span></span><a href="#__42" id="__42" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get console height in character count</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">int </span><span class="member_signature"><span class="member_name">get_text_width</span>(<span class="member_params">) const</span></span><a href="#__43" id="__43" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get console width in character count</p>
</div><div class="divmember signal_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">line_validate</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;str</span>)</span></span><a href="#__44" id="__44" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>This member is a Qt signal.</p>
<p>Signal emited when text line is validated with enter key</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">load_history</span>(<span class="member_params"><span class="member_param"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qsettings.html">QSettings</a></span> &amp;s, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;key = &quot;qtlua_console_history&quot;</span>)</span></span><a href="#__45" id="__45" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Load history from <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qsettings.html">QSettings</a></span> object and keep a <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qpointer.html">QPointer</a></span> to QSettings for subsequent call to the Console::<a href="Console_class_reference.html#__47">save_history</a> function.</p>
</div><div class="divmember slot_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">print</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;str</span>)</span></span><a href="#__46" id="__46" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>This member is a Qt slot.</p>
<p>Display text on the console</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">save_history</span>(<span class="member_params"><span class="member_param"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qsettings.html">QSettings</a></span> &amp;s, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;key = &quot;qtlua_console_history&quot;</span>) const</span></span><a href="#__47" id="__47" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Save history using <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qsettings.html">QSettings</a></span> object previously passed to Console::<a href="Console_class_reference.html#__45">load_history</a> function.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_completion_regexp</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qregexp.html">QRegExp</a></span> &amp;regexp</span>)</span></span><a href="#__48" id="__48" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set Qt regular expression used to extract text before cursor to pass to completion signal.</p>
<p>The default regexp <span class="tt">[_.:a-zA-Z0-9]+$</span> is suited to extract lua identifiers and table member access statements.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_history</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstringlist.html">QStringList</a></span> &amp;h</span>)</span></span><a href="#__49" id="__49" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set current history.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_history_size</span>(<span class="member_params"><span class="member_param">int history_size</span>)</span></span><a href="#__50" id="__50" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set console max history entries count</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_prompt</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qstring.html">QString</a></span> &amp;p</span>)</span></span><a href="#__51" id="__51" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set console prompt.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_text_height</span>(<span class="member_params"><span class="member_param">int height</span>)</span></span><a href="#__52" id="__52" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set console height in character count</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">set_text_width</span>(<span class="member_params"><span class="member_param">int width</span>)</span></span><a href="#__53" id="__53" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Set console width in character count</p>
</div></div></div><div class="foot"><p class="generated"><a style="float: right;" href="http://validator.w3.org/check?uri=referer">Valid XHTML 1.0 Strict</a>Generated by diaxen on Sun Jan  8 22:46:02 2012 using <a href="http://www.nongnu.org/mkdoc/">MkDoc</a></p></div></body></html>